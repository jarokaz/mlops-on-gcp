{"displayName": "tfx_covertype_continuous_training", "name": "projects//pipelineJobs/tfx_covertype_continuous_training_20200901021312", "outputPathConfig": {"pipelineRoot": "gs://mlops-dev-env-artifact-store/tfx_covertype_continuous_training"}, "spec": {"pipelineContext": "tfx_covertype_continuous_training", "steps": {"CsvExampleGen.import_csv_data": {"cachePolicy": {}, "fileBasedExampleGen": {"container": {"args": ["--executor_class_path", "tfx.components.example_gen.csv_example_gen.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python3", "/tfx-src/tfx/orchestration/ai_platform_pipelines/container/ai_platform_run_executor.py"], "image": "gcr.io/mlops-dev-env/caip-tfx-custom"}, "inputBaseUri": "gs://workshop-datasets/covertype/small", "inputConfig": {"splits": [{"name": "single_split", "pattern": "*"}]}, "outputConfig": {"split_config": {"splits": [{"hash_buckets": 4.0, "name": "train"}, {"hash_buckets": 1.0, "name": "eval"}]}}}}, "Evaluator": {"cachePolicy": {}, "dependencies": [{"step": "CsvExampleGen.import_csv_data"}, {"step": "Trainer"}], "task": {"container": {"args": ["--executor_class_path", "tfx.components.evaluator.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python3", "/tfx-src/tfx/orchestration/ai_platform_pipelines/container/ai_platform_run_executor.py"], "image": "gcr.io/mlops-dev-env/caip-tfx-custom"}, "executionProperties": {"eval_config": {"stringValue": "{\n  \"metrics_specs\": [\n    {\n      \"metrics\": [\n        {\n          \"class_name\": \"SparseCategoricalAccuracy\",\n          \"threshold\": {\n            \"change_threshold\": {\n              \"absolute\": 0.0001,\n              \"direction\": \"HIGHER_IS_BETTER\"\n            },\n            \"value_threshold\": {\n              \"lower_bound\": 0.5,\n              \"upper_bound\": 0.995\n            }\n          }\n        },\n        {\n          \"class_name\": \"ExampleCount\"\n        }\n      ]\n    }\n  ],\n  \"model_specs\": [\n    {\n      \"label_key\": \"Cover_Type\"\n    }\n  ],\n  \"slicing_specs\": [\n    {},\n    {\n      \"feature_keys\": [\n        \"Wilderness_Area\"\n      ]\n    }\n  ]\n}"}, "example_splits": {"stringValue": "null"}}, "inputs": {"examples": {"stepOutput": {"output": "examples", "step": "CsvExampleGen.import_csv_data"}}, "model": {"stepOutput": {"output": "model", "step": "Trainer"}}}, "outputs": {"blessing": {"artifact": {"customProperties": {"custom:name": {"stringValue": "blessing"}, "custom:pipeline_name": {"stringValue": "tfx_covertype_continuous_training"}, "custom:producer_component": {"stringValue": "Evaluator"}, "tfx_type": {"stringValue": "tfx.types.standard_artifacts.ModelBlessing"}, "type_name": {"stringValue": "ModelBlessing"}}, "file": {}}}, "evaluation": {"artifact": {"customProperties": {"custom:name": {"stringValue": "evaluation"}, "custom:pipeline_name": {"stringValue": "tfx_covertype_continuous_training"}, "custom:producer_component": {"stringValue": "Evaluator"}, "tfx_type": {"stringValue": "tfx.types.standard_artifacts.ModelEvaluation"}, "type_name": {"stringValue": "ModelEvaluation"}}, "metrics": {}}}}}}, "ExampleValidator": {"cachePolicy": {}, "dependencies": [{"step": "ImporterNode.import_user_schema"}, {"step": "StatisticsGen.generate_statistics"}], "task": {"container": {"args": ["--executor_class_path", "tfx.components.example_validator.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python3", "/tfx-src/tfx/orchestration/ai_platform_pipelines/container/ai_platform_run_executor.py"], "image": "gcr.io/mlops-dev-env/caip-tfx-custom"}, "executionProperties": {"exclude_splits": {"stringValue": "[]"}}, "inputs": {"schema": {"stepOutput": {"output": "result", "step": "ImporterNode.import_user_schema"}}, "statistics": {"stepOutput": {"output": "statistics", "step": "StatisticsGen.generate_statistics"}}}, "outputs": {"anomalies": {"artifact": {"customProperties": {"custom:name": {"stringValue": "anomalies"}, "custom:pipeline_name": {"stringValue": "tfx_covertype_continuous_training"}, "custom:producer_component": {"stringValue": "ExampleValidator"}, "tfx_type": {"stringValue": "tfx.types.standard_artifacts.ExampleAnomalies"}, "type_name": {"stringValue": "ExampleAnomalies"}}, "file": {}}}}}}, "ImporterNode.import_user_schema": {"cachePolicy": {}, "importer": {"artifact": {"customProperties": {"tfx_type": {"stringValue": "tfx.types.standard_artifacts.Schema"}, "type_name": {"stringValue": "Schema"}}, "schema": {}, "uri": "schema"}}}, "Pusher": {"cachePolicy": {}, "dependencies": [{"step": "Evaluator"}, {"step": "Trainer"}], "task": {"container": {"args": ["--executor_class_path", "tfx.extensions.google_cloud_ai_platform.pusher.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python3", "/tfx-src/tfx/orchestration/ai_platform_pipelines/container/ai_platform_run_executor.py"], "image": "gcr.io/mlops-dev-env/caip-tfx-custom"}, "executionProperties": {"custom_config": {"stringValue": "{\"ai_platform_serving_args\": {\"model_name\": \"covertype_classifier\", \"project_id\": \"\", \"pythonVersion\": \"3.7\", \"regions\": [\"us-central1\"], \"runtimeVersion\": \"2.1\"}}"}, "push_destination": {"stringValue": "{\n  \"filesystem\": {\n    \"base_directory\": \"gs://mlops-dev-env-artifact-store/models/covertype\"\n  }\n}"}}, "inputs": {"model": {"stepOutput": {"output": "model", "step": "Trainer"}}, "model_blessing": {"stepOutput": {"output": "blessing", "step": "Evaluator"}}}, "outputs": {"pushed_model": {"artifact": {"customProperties": {"custom:name": {"stringValue": "pushed_model"}, "custom:pipeline_name": {"stringValue": "tfx_covertype_continuous_training"}, "custom:producer_component": {"stringValue": "Pusher"}, "tfx_type": {"stringValue": "tfx.types.standard_artifacts.PushedModel"}, "type_name": {"stringValue": "PushedModel"}}, "file": {}}}}}}, "ResolverNode.latest_blessed_model_resolver": {"cachePolicy": {}, "resolver": {"resolverPolicy": "LATEST_BLESSED_MODEL"}}, "SchemaGen.auto_generate_schema": {"cachePolicy": {}, "dependencies": [{"step": "StatisticsGen.generate_statistics"}], "task": {"container": {"args": ["--executor_class_path", "tfx.components.schema_gen.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python3", "/tfx-src/tfx/orchestration/ai_platform_pipelines/container/ai_platform_run_executor.py"], "image": "gcr.io/mlops-dev-env/caip-tfx-custom"}, "executionProperties": {"exclude_splits": {"stringValue": "[]"}, "infer_feature_shape": {"intValue": "0"}}, "inputs": {"statistics": {"stepOutput": {"output": "statistics", "step": "StatisticsGen.generate_statistics"}}}, "outputs": {"schema": {"artifact": {"customProperties": {"custom:name": {"stringValue": "schema"}, "custom:pipeline_name": {"stringValue": "tfx_covertype_continuous_training"}, "custom:producer_component": {"stringValue": "SchemaGen.auto_generate_schema"}, "tfx_type": {"stringValue": "tfx.types.standard_artifacts.Schema"}, "type_name": {"stringValue": "Schema"}}, "schema": {}}}}}}, "StatisticsGen.generate_statistics": {"cachePolicy": {}, "dependencies": [{"step": "CsvExampleGen.import_csv_data"}], "task": {"container": {"args": ["--executor_class_path", "tfx.components.statistics_gen.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python3", "/tfx-src/tfx/orchestration/ai_platform_pipelines/container/ai_platform_run_executor.py"], "image": "gcr.io/mlops-dev-env/caip-tfx-custom"}, "executionProperties": {"exclude_splits": {"stringValue": "[]"}}, "inputs": {"examples": {"stepOutput": {"output": "examples", "step": "CsvExampleGen.import_csv_data"}}}, "outputs": {"statistics": {"artifact": {"customProperties": {"custom:name": {"stringValue": "statistics"}, "custom:pipeline_name": {"stringValue": "tfx_covertype_continuous_training"}, "custom:producer_component": {"stringValue": "StatisticsGen.generate_statistics"}, "tfx_type": {"stringValue": "tfx.types.standard_artifacts.ExampleStatistics"}, "type_name": {"stringValue": "ExampleStatistics"}}, "statistics": {}}}}}}, "Trainer": {"cachePolicy": {}, "dependencies": [{"step": "ImporterNode.import_user_schema"}, {"step": "Transform"}], "task": {"container": {"args": ["--executor_class_path", "tfx.components.trainer.executor.GenericExecutor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python3", "/tfx-src/tfx/orchestration/ai_platform_pipelines/container/ai_platform_run_executor.py"], "image": "gcr.io/mlops-dev-env/caip-tfx-custom"}, "executionProperties": {"custom_config": {"stringValue": "null"}, "eval_args": {"stringValue": "{\n  \"num_steps\": 500\n}"}, "run_fn": {"stringValue": "modules.model.run_fn"}, "train_args": {"stringValue": "{\n  \"num_steps\": 5000\n}"}}, "inputs": {"examples": {"stepOutput": {"output": "transformed_examples", "step": "Transform"}}, "schema": {"stepOutput": {"output": "result", "step": "ImporterNode.import_user_schema"}}, "transform_graph": {"stepOutput": {"output": "transform_graph", "step": "Transform"}}}, "outputs": {"model": {"artifact": {"customProperties": {"custom:name": {"stringValue": "model"}, "custom:pipeline_name": {"stringValue": "tfx_covertype_continuous_training"}, "custom:producer_component": {"stringValue": "Trainer"}, "tfx_type": {"stringValue": "tfx.types.standard_artifacts.Model"}, "type_name": {"stringValue": "Model"}}, "model": {}}}, "model_run": {"artifact": {"customProperties": {"custom:name": {"stringValue": "model_run"}, "custom:pipeline_name": {"stringValue": "tfx_covertype_continuous_training"}, "custom:producer_component": {"stringValue": "Trainer"}, "tfx_type": {"stringValue": "tfx.types.standard_artifacts.ModelRun"}, "type_name": {"stringValue": "ModelRun"}}, "file": {}}}}}}, "Transform": {"cachePolicy": {}, "dependencies": [{"step": "CsvExampleGen.import_csv_data"}, {"step": "ImporterNode.import_user_schema"}], "task": {"container": {"args": ["--executor_class_path", "tfx.components.transform.executor.Executor", "--json_serialized_invocation_args", "{{$}}"], "command": ["python3", "/tfx-src/tfx/orchestration/ai_platform_pipelines/container/ai_platform_run_executor.py"], "image": "gcr.io/mlops-dev-env/caip-tfx-custom"}, "executionProperties": {"custom_config": {"stringValue": "null"}, "preprocessing_fn": {"stringValue": "modules.preprocessing.preprocessing_fn"}}, "inputs": {"examples": {"stepOutput": {"output": "examples", "step": "CsvExampleGen.import_csv_data"}}, "schema": {"stepOutput": {"output": "result", "step": "ImporterNode.import_user_schema"}}}, "outputs": {"transform_graph": {"artifact": {"customProperties": {"custom:name": {"stringValue": "transform_graph"}, "custom:pipeline_name": {"stringValue": "tfx_covertype_continuous_training"}, "custom:producer_component": {"stringValue": "Transform"}, "tfx_type": {"stringValue": "tfx.types.standard_artifacts.TransformGraph"}, "type_name": {"stringValue": "TransformGraph"}}, "file": {}}}, "transformed_examples": {"artifact": {"customProperties": {"custom:name": {"stringValue": "transformed_examples"}, "custom:pipeline_name": {"stringValue": "tfx_covertype_continuous_training"}, "custom:producer_component": {"stringValue": "Transform"}, "tfx_type": {"stringValue": "tfx.types.standard_artifacts.Examples"}, "type_name": {"stringValue": "Examples"}}, "dataset": {}}}}}}}}}